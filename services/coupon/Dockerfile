FROM 658310991765.dkr.ecr.us-east-1.amazonaws.com/node:alpine

WORKDIR /coupon

ARG MEDIMPACT_CLIENT_CODE_ARG=MIC61
ARG MEDIMPACT_URL_ARGS=https://rxsavings-ws.medimpact.com/cashcard-ws-v1_0/soap/cashcard
ARG NATS_URL_ARG=""
ARG NATS_CLIENT_ID_ARGS=""
ARG NATS_CLUSTER_ID_ARG=coupon


ENV NATS_URL $NATS_URL_ARG
ENV NATS_CLIENT_ID $NATS_CLIENT_ID_ARGS
ENV NATS_CLUSTER_ID $NATS_CLUSTER_ID_ARG
ENV MEDIMPACT_URL $MEDIMPACT_URL_ARGS
ENV MEDIMPACT_APIKEY = $APIKEYS
ENV MEDIMPACT_CLIENT_CODE=$MEDIMPACT_CLIENT_CODE_ARG 

COPY package.json .
RUN npm install 
COPY . .

EXPOSE 6000

CMD ["npm", "start"]