FROM 658310991765.dkr.ecr.us-east-1.amazonaws.com/node:alpine

WORKDIR /text-messages
ARG PORT_ARG=7000
ARG NATS_URL_ARG=http://localhost:4222
ARG NATS_CLUSTER_ID_ARG=text-messages
ARG TWILLO_PHONENUMBER_ARG=+17792446842

ENV PORT $PORT_ARG
ENV NATS_URL $NATS_URL_ARG
ENV NATS_CLUSTER_ID $NATS_CLUSTER_ID_ARG 
ENV TWILLO_PHONENUMBER $TWILLO_PHONENUMBER_ARG
COPY package.json .
RUN npm install  
COPY . .

EXPOSE $PORT

CMD ["npm", "start"]